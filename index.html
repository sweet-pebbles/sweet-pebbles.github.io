<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pebbles</title>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    body {
        font-family: Arial, Helvetica, sans-serif;
        font-size: large;
    }

    .container {
        margin-top: 20px;
        margin-bottom: 30px;
        margin-left: auto;
        margin-right: auto;
        width: 80%;
        /* position: absolute; */
        /* top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%); */
    }

    #reply {
        margin-top: 10px;
        color: black;
    }

    #correct-answer {
        display: none;
    }

    #myBtn {
        padding: 5px 10px;
        margin-bottom: 8px;
        background-color: #303030;
        border-radius: 2px;
        color: white;
        border: none;
    }

    #answer,#pass {
        padding: 3px;
        border: 1px #2ecc71 solid;
        border-radius: 2px;
    }

    #pass {
        margin-bottom: 5px;
    }

    #question, #secQue {
        font-size: 15px;
    }

    #image {
        padding-left: 20px;
        margin-top: 15px;
        margin-bottom: 15px;
        width: 13rem;
    }

    #hi {
        /* margin-top: 5rem; */
        width: 50%;
        margin-left: 25%;
    }

    #letter {
        margin-top: 30px;
        font-size: small;
    }

    textarea{
        width: 90%;
        padding: 10px;
    }

    #message-button, #message-button-2,#second-form-button {
        margin-top: 8px;
        padding: 5px 10px;
        color: white;
        background-color: #303030;
        border: 1px #303030 solid;
        border-radius: 2px;
    }

    #wait {
        display: none;
        color: #2ecc71;
    }

    .wrapper-3{
        display: none;
    }

</style>
<body>
    <div class="container">
        <div id="correct-answer">
            <img id='hi' src='./hi.png'>
            <p id='letter'>
                Well, who would have known. We are friends now :)<br/><br/>
                Welcome back home. I am very happy to see you again but I am a little bit confused.<br/>
                After I sent you my last letter on 22nd June, you waved at me four days later.<br/>
                Then, you vanished into thin air for almost a month without a call or a message to let
                me know that you were going somewhere for a long time. I waved back at you that day but I guess
                you didn't saw it. Anyways, I thought that you would call me that day since why else would you say Hi to me.<br/><br/>

                Then, five days later, I got a call from an unknown number. I am assuming that it was you who called me.
                So, I called that number two hours later. Your mother picked the phone. It seemed like she had no idea about a call
                from her number. So, I am guessing you called me from your mother's number. If that's the case, then please forgive me for
                not being able to pick the call. It had already been five days and since you didn't called me on the last day after waving at me
                I wasn't hoping to get a call from you after five days. My mobile's display got damaged too. So, I had to open my laptop and connect
                my phone to see who was calling me. I also assumed that you wouldn't be calling me at 10:30 in the morning<br/><br/>

                And now that you are back, you are still not calling me. I saw you last Saturday on the roof. You were making eye contact with me
                but when I made a gesture at you to call me, you didn't do anything. The distance between our houses is also a problem. We both sometimes
                aren't able to see our gestures. And the second problem are your neighbours. There are some girls in that house and they come on their roof
                everyday. Whenever I want to say Hi to you, there is always at least one of them looking in my direction. It's like they are on guard duty.
                One would be walking towards me and the other in the opposite direction. It's like it's their personal mission to not allow me to talk to you
                So, if you called if before, I don't understand why aren't you calling me now. If calling me is too much, then you can also send me a Hi on Whatsapp
                I don't use social media. That's why I didn't shared any social media username with you before. But, I feel like sharing your number with me is a very big
                step for you and I understand all that. So, if you prefer to first talk to me on Instagram, Snapchat etc, then I have writeen my usernames below.
                I created the accounts recently so don't get spooked if you don't see any photos or friends on my account.<br/><br/>

                You have also stopped coming on your roof now. I am guessing it's because of tutions or something in the evening.
                So, sending a written letter seemed more risky. That's why I chose to write the letter online.
                These letters are the only way I can talk to you and sometimes I have a lot to say. So, they tend to get long sometimes. Apologies for that<br/><br/>

                So, all I wanted to say is that if you still want to be friends with me and I think you do, so just call/message me whichever way you like
                Just don't take too long this time. My classes are online so I am most probably here for the whole August.
                Dadi's food isn't getting any better. My parents are asking me to come back home soon. I haven't been home for two months now. My sister is probably
                enjoying my Wifi alone. Also, our schools and colleges might get open in a month or two and I don't know if we would be seeing each other after that if
                you wouldn't contact me soon.<br/><br/>

                But, it's not my decision to make. There are two writers in this story. I have writeen my part. It's your turn now. It's you who will decide
                the end to this story. So, choose wisely my friend and make sure there are no regrets on your part.
            </p>
            <br/><br/>
            <form id='message-contact'>
                <h5 style='margin-bottom: 5px;'>If you want to say something to me, then you can type here...</h5>
                <br/>
                <textarea placeholder="Type here..." id='textMessage' name='textMessage' rows='4'></textarea>
                <br/>
                <input id='message-button' onclick='send();' type="submit" value='Send'>
                <br/><br/>
                <h5>Or if you still do not want to talk to me...</h5>
                <button id='message-button-2' onclick="nextPage();">Continue</button>
            </form>
            <p id='wait' >Hold on...</p>
        </div>
        <div class="wrapper-1">
            <h1>Are we Friends?</h1>
            <br/>
            <h3>Let's find out...</h3>
            <br/>
            <h5>
                <q>
                    <i>
                        He comes from a place where good prevails <br/>
                        where friendship lasts and evil fails; <br/>
                        He is noble, his heart kind, <br/>
                        A friend hard to find.
                    </i>
                </q>   
            </h5>
            <br/>
            <p id='question'>What is the name of our brave adventurer?</p>
            <img id="image" src='./cloud_and_pathar.svg'>
            <br/>
            <input id='answer' type='text' placeholder="Type here...">
        </div>
        <div class="wrapper-2">
            <form id='contact-form'>
                <br/>
                <input type="submit" id='myBtn' onclick="sendAlert();" value="Continue">
                <!-- <p id='warning'  style='color: grey;'>(Submit the correct answer to reveal the message)</p> -->
            </form>
            <h3 id='reply'></h3>
        </div>
        <div class="wrapper-3">
            <p style="margin-bottom:15px;font-size: smaller;">OR, answer this...</p>
            <form id="second-form">
                <p id="secQue" style='margin-bottom:15px;'>What is my name (first name)?</p>
                <input id='pass' type='text' placeholder='Type here...' required><br/>
                <button id='second-form-button' type='submit' onclick="secFunc();">Submit</button>
            </form>
            <h2 id='mouse' style="margin-top:10px;"></h2>
        </div>
    </div>
<script>

    function nextPage() {
        window.location.href = "/page2.html";
    }

    const messageForm = document.getElementById('message-contact')
    const waitMessage = document.getElementById('wait')

    messageForm.addEventListener('submit', event => event.preventDefault())

    function send(){

            const letterFromHer = document.getElementById('textMessage').value

            if(!letterFromHer) {
                return swal("Oops!", "Fill in the text field", "warning");
            }

            wait.style.display = 'block'
            messageForm.style.display = 'none'

            const url='https://formspree.io/xrgydpoj';
            let data = {
                _replyto: 'fromPage@second.com',
                _message: letterFromHer
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 2')
                window.location.href = "/page2.html";
            })
            .catch(error => {
                console.log('error')
            })
    }

</script>
<script>
    const form = document.getElementById('contact-form')
    const formTwo = document.getElementById('second-form')

    const warning = document.getElementById('warning')
    const acknowledge = document.getElementById('reply')
    const correctAnswer = document.getElementById('correct-answer')

    const wrapperOne = document.querySelector('.wrapper-1')
    const wrapperTwo = document.querySelector('.wrapper-2')

    var answerCopy = []
    var counter = 0

    formTwo.addEventListener('submit', e => e.preventDefault())

    form.addEventListener('submit', e => {
        e.preventDefault()

        counter = counter + 1
        
        if (counter >= 3){
            acknowledge.innerHTML = ''
            document.querySelector('.wrapper-3').style.display = 'block'
        }
        
        const button = document.getElementById('myBtn')
            button.disabled = true

            const url='https://formspree.io/xrgydpoj';
            let data = {
                _replyto: 'fromPage@first.com',
                _message: answerCopy
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 1')
                form.reset()
            })
            .catch(error => {
                console.log('error')
            })
        //  Enabling button
            button.disabled = false
        })

    function sendAlert() {
        var answer = document.getElementById('answer').value

        answerCopy.push(answer)
        console.log(answerCopy)
        // warning.style.display = 'none'


        if( answer.toLowerCase() == 'pebbles' | answer.toLowerCase() == 'pebble' ) {
            
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';

        }
        else if(!answer){
            acknowledge.innerHTML = 'Fill in the field...'
        }

        else{
            document.getElementById('answer').value = ''
            acknowledge.innerHTML = 'Nope, try again...'
        }
    }

    function secFunc() {
        const replyTwo = document.getElementById('mouse')
        var pass = document.getElementById('pass').value

        if(pass.toLowerCase() == 'aryan'){
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';
            document.querySelector('.wrapper-3').style.display = 'none'

        }
        else{
            replyTwo.innerHTML = 'you need to work hard...'
        }
    }
</script>
</body>
</html>