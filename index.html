<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pebbles</title>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    body {
        font-family: Arial, Helvetica, sans-serif;
        font-size: large;
    }

    .container {
        margin-top: 20px;
        margin-bottom: 30px;
        margin-left: auto;
        margin-right: auto;
        width: 80%;
        /* position: absolute; */
        /* top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%); */
    }

    #reply {
        margin-top: 10px;
        color: black;
    }

    #correct-answer {
        display: none;
    }

    #myBtn {
        padding: 5px 10px;
        margin-bottom: 8px;
        background-color: #303030;
        border-radius: 2px;
        color: white;
        border: none;
    }

    #answer,#pass {
        padding: 3px;
        border: 1px #2ecc71 solid;
        border-radius: 2px;
    }

    #pass {
        margin-bottom: 5px;
    }

    #question, #secQue {
        font-size: 15px;
    }

    #image {
        padding-left: 20px;
        margin-top: 15px;
        margin-bottom: 15px;
        width: 13rem;
    }

    #hi {
        /* margin-top: 5rem; */
        width: 50%;
        margin-left: 25%;
    }

    #letter {
        margin-top: 30px;
        font-size: medium;
    }

    textarea{
        width: 90%;
        padding: 10px;
    }

    #message-button, #message-button-2,#second-form-button {
        margin-top: 8px;
        padding: 5px 10px;
        color: white;
        background-color: #303030;
        border: 1px #303030 solid;
        border-radius: 2px;
    }

    #wait {
        display: none;
        color: #2ecc71;
    }

    .wrapper-3{
        display: none;
    }

</style>
<body>
    <div class="container">
        <div id="correct-answer">
            <h1>Will we ever be friends?</h1>
            <p id='letter'>                
                <b>Dear friend,<br/>
                It's time for me to go home now.<br/>
                
                I wanted to say goodbye before I left but I haven't seen you for two weeks now and I wasn't sure if I was going to see you again. 
                So, I left this ball on your roof in the hope that you will find it. By the time you read this, I may be already gone.<br/>
                
                To be honest, I don't really know what to write in this letter. I don't see you in the evening anymore and that makes me wonder if 
                I did something wrong or inappropriate. Or, maybe there are some misunderstandings between us. I don't even know in what tone I should be 
                writing this letter. Should I write this as an apology? Or, should I write this as one would to a close friend?<br/><br/>

                After I sent you my last letter in July to clear things between us, four days later, you waved at me. 
                Then, you went somewhere for quite a lot of days. I still don't understand why you didn't called me that day if you wanted to talk to me. 
                I waved back at you that day in case you didn't saw it. After you were gone, I was faced with a difficult decision. 
                Should I go back home or should I stay here with Dadi? Since you waved at me that day, I knew that you wanted to talk to me. 
                But, you leaving without any call or message complicated things. Before I came here, I told my parents that I was going for 2 or 3 weeks. 
                Two weeks were already gone. So, I decided to stay for one more week in the hope that I will see you again before I leave. 
                Of course, I didn't saw you that week too. But, I did got a call from someone that week. I rarely get calls from unknown numbers which meant that 
                the call was probably from you. To this day, I am still not sure if the call was really from you but I like to assume that it was. 
                I missed that call and when I called back your mother picked the phone. I asked if she called me and she sounded like she had no idea about a call. 
                So, I said something like "Sorry Aunty. Must be wrong number" and hanged the phone. If I hadn't got that call, I would have left for home and never come back. 
                It was a difficult decision to make as I didn't knew when I was going to see you again. It could be a few days, weeks, or never.
                <br/><br/>

                One more week passed and no sign of you. Similarly, a few more weeks passed and you were still nowhere to be found. I was so confused. 
                I started asking myself if what I was doing was wrong. I even started to think that maybe this isn't your home and maybe I will never see you again. 
                At times I thought if it was wise to stay away from home for that long. What does that say about me as a person? 
                Am I just like the rest of the boys in this world running after girls? <br/><br/>

                The only thing I could say to myself to remove all these doubts was that there was no shame in waiting for a friend. 
                I made sure that the time I spent waiting for you wasn't wasted. I bought some more books and started reading more. 
                My classes are online so I had a lot of work to keep myself busy. Every evening, I used to come in the hope that I would see you today. 
                But, forty days passed like this before I saw you again.
                I missed my first Rakhi in my life. Of course, my sister was angry. I still owe her a gift. I saw you again for the first time when you were 
                placing diyas on your roof in the night. I was so happy. The next day I saw you, I waved at you. But, it seemed to me like you were trying to 
                ignore me that day. I thought that you would call or message me now that you know I am still here. But you never did. And now you have stopped 
                coming to your roof altogether.<br/><br/>
                
                I can't stay here any longer. My family misses me and I miss them too. I haven't seen my buddy Timmy for so long now. Dadi's food isn't getting any better too. 
                Also, it's not easy for me to come to the roof every evening after so many days and each day come downstairs disappointed without seeing you.<br/><br/>

                So, I hope this letter clears any misunderstandings between us and if you still want to talk to me, hopefully, you will contact me soon. 
                And please, if you call me and I somehow miss the call, please call again. The last time you called me from your mother's number, 
                I can tell that you had doubts while calling me. That's why you didn't called again. So, this time, make your mind before calling or messaging me. 
                I very much understand that it's a big step for you being a girl and it's wise to be careful but not every boy in this world is bad. 
                By now, you must have some idea about the kind of person I am. I can't do anything to make you trust me more. All I can say is that sometimes 
                we have to take a leap of faith first. The trusting part comes later. I am also sharing my Snapchat and Insta usernames with you if you want to talk to 
                me there first. But, do know that I don't use social media and these accounts are mostly empty.
                <br/><br/>

                I wouldn't convince you to message me but I do want to say that whatever you choose to decide, I would respect your decision. 
                Friendship is a mutual relationship and if you don't want to be friends with me then I will accept that. If I ever saw you again the next time I am here, 
                I will not make any gesture towards you and no more letters. So, no need to worry about that. I am quite able to handle myself and 
                I don't want to cause any discomfort to anyone because of my actions.<br/><br/>

                I wish I knew your name so that I could sign off this letter with your name at the end. But, it now seems that I will never get the chance 
                to know your name or anything about you. But, I guess I can assume a name and then say goodbye to you. So, I am going to call you Sonya. 
                It's the name of the girl in the book I was recently reading. It's a Russian novel called "War and Peace". The name is Russian too but maybe 
                it doesn't matter now what I call you. So, Sonya it is.<br/><br/>

                My friends will probably tell me that I wasted such a large amount of time of my life by coming here and that I was a fool to do so. 
                But, that's not true. I wasted no time here. Sure, I came back here only to meet you and now I have to go back home without knowing you. 
                But, isn't that what life is all about. Don't they say that "Life is all about the journey"?
                I don't think that we are born again which means that I only get around 70 years to do all I want to do in this world. 
                This also means that you will never get born again and I will never get the chance to know someone like you. 
                So, I had to do everything that I can to know you and I feel like I have done all I could to know you. 
                So, I don't have any regrets in that regard. My deepest regret is I will not see you grow into the good person I know you will become.<br/><br/>

                Finally, my friend, I ask that you never abandon your life to fate and I wish that you achieve all your ambitions in life and lead a happy and fun life.<br/><br/>
                
                I'll probably never see you again. I know that. And you know that. And knowing this, I say farewell.<br/><br/>
                Goodbye Sonya<br/>

                Your friend,<br/>
                Aryan<br/><br/>
                Snapchat: aryan_earth<br/>
                Instagram: aryan_earth<br/>
                Mobile Number: 7015230859<br/>
                This story didn't had a happy ending but that doesn't mean that this letter cannot have one too. So, I have something for you on the next page. A token of friendship.<br/>
                Pressing the "Send" or "Continue" button below will take you to the next page.</b>
            </p>
            <br/><br/>
            <form id='message-contact'>
                <h5 style='margin-bottom: 5px;'>If you want to say something to me, then you can type it in the box below and press send. 
                    This is only one way communication. So, I can see your message but I can't reply to it. If you don't want to know me anymore, then can
                you please send something like a goodbye in the box below. That's all I ask from you.</h5>
                <br/>
                <textarea placeholder="Type here..." id='textMessage' name='textMessage' rows='4'></textarea>
                <br/>
                <input id='message-button' onclick='send();' type="submit" value='Send'>
                <br/><br/>
                <h5>Or, if you don't want to send anything, then click on Continue.</h5>
                <button id='message-button-2' onclick="nextPage();">Continue</button>
            </form>
            <p id='wait' >Hold on...</p>
        </div>
        <div class="wrapper-1">
            <h1>Are we Friends?</h1>
            <br/>
            <h3>Let's find out...</h3>
            <br/>
            <h5>
                <q>
                    <i>
                        He comes from a place where good prevails <br/>
                        where friendship lasts and evil fails; <br/>
                        He is noble, his heart kind, <br/>
                        A friend hard to find.
                    </i>
                </q>   
            </h5>
            <br/>
            <p id='question'>What is the name of our brave adventurer?</p>
            <img id="image" src='./cloud_and_pathar.svg'>
            <br/>
            <input id='answer' type='text' placeholder="Type here...">
        </div>
        <div class="wrapper-2">
            <form id='contact-form'>
                <br/>
                <input type="submit" id='myBtn' onclick="sendAlert();" value="Continue">
                <!-- <p id='warning'  style='color: grey;'>(Submit the correct answer to reveal the message)</p> -->
            </form>
            <h3 id='reply'></h3>
        </div>
        <div class="wrapper-3">
            <p style="margin-bottom:15px;font-size: smaller;">OR, answer this...</p>
            <form id="second-form">
                <p id="secQue" style='margin-bottom:15px;'>What is my name (first name)?</p>
                <input id='pass' type='text' placeholder='Type here...' required><br/>
                <button id='second-form-button' type='submit' onclick="secFunc();">Submit</button>
            </form>
            <h2 id='mouse' style="margin-top:10px;"></h2>
        </div>
    </div>
<script>

    function nextPage() {
        window.location.href = "/page2.html";
    }

    const messageForm = document.getElementById('message-contact')
    const waitMessage = document.getElementById('wait')

    messageForm.addEventListener('submit', event => event.preventDefault())

    function send(){

            const letterFromHer = document.getElementById('textMessage').value

            if(!letterFromHer) {
                return swal("Oops!", "Fill in the text field", "warning");
            }

            wait.style.display = 'block'
            messageForm.style.display = 'none'

            const url='https://formspree.io/xrgydlvr--';
            let data = {
                _replyto: 'fromPage@second.com',
                _message: letterFromHer
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 2')
                window.location.href = "/page2.html";
            })
            .catch(error => {
                console.log('error')
            })
    }

</script>
<script>
    const form = document.getElementById('contact-form')
    const formTwo = document.getElementById('second-form')

    const warning = document.getElementById('warning')
    const acknowledge = document.getElementById('reply')
    const correctAnswer = document.getElementById('correct-answer')

    const wrapperOne = document.querySelector('.wrapper-1')
    const wrapperTwo = document.querySelector('.wrapper-2')

    var answerCopy = []
    var counter = 0

    formTwo.addEventListener('submit', e => e.preventDefault())

    form.addEventListener('submit', e => {
        e.preventDefault()
        counter = counter + 1
        
        if (counter >= 3){
            acknowledge.innerHTML = ''
            document.querySelector('.wrapper-3').style.display = 'block'
        }

        for (var i=0; i< answerCopy.length; i++){
            if(answerCopy[i] == 'pebble' | answerCopy[i] == 'pebbles'){
                document.querySelector('.wrapper-3').style.display = 'none'
            }
        }
        
        const button = document.getElementById('myBtn')
            button.disabled = true

            const url='https://formspree.io/xrgydlvr--';
            let data = {
                _replyto: 'fromPage@first.com',
                _message: answerCopy
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 1')
                form.reset()
            })
            .catch(error => {
                console.log('error')
            })
        //  Enabling button
            button.disabled = false
        })

    function sendAlert() {
        var answer = document.getElementById('answer').value

        answerCopy.push(answer)
        console.log(answerCopy)
        // warning.style.display = 'none'


        if( answer.toLowerCase() == 'pebbles' | answer.toLowerCase() == 'pebble' ) {
            
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';
            document.querySelector('.wrapper-3').style.display = 'none'
        }
        else if(!answer){
            acknowledge.innerHTML = 'Fill in the field...'
            document.querySelector('.wrapper-3').style.display = 'none'
        }

        else{
            document.getElementById('answer').value = ''
            acknowledge.innerHTML = 'Nope, try again...'
            document.querySelector('.wrapper-3').style.display = 'none'
        }
    }

    function secFunc() {
        const replyTwo = document.getElementById('mouse')
        var pass = document.getElementById('pass').value

        if(pass.toLowerCase() == 'aryan'){
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';
            document.querySelector('.wrapper-3').style.display = 'none'

        }
        else{
            replyTwo.innerHTML = 'you need to work hard...'
        }
    }
</script>
</body>
</html>