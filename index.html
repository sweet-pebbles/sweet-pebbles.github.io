<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pebbles</title>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    body {
        font-family: Arial, Helvetica, sans-serif;
        font-size: large;
    }

    .container {
        margin-top: 20px;
        margin-bottom: 30px;
        margin-left: auto;
        margin-right: auto;
        width: 80%;
        /* position: absolute; */
        /* top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%); */
    }

    #reply {
        margin-top: 10px;
        color: black;
    }

    #correct-answer {
        display: none;
    }

    #myBtn {
        padding: 5px 10px;
        margin-bottom: 8px;
        background-color: #303030;
        border-radius: 2px;
        color: white;
        border: none;
    }

    #answer,#pass {
        padding: 3px;
        border: 1px #2ecc71 solid;
        border-radius: 2px;
    }

    #pass {
        margin-bottom: 5px;
    }

    #question, #secQue {
        font-size: 15px;
    }

    #image {
        padding-left: 20px;
        margin-top: 15px;
        margin-bottom: 15px;
        width: 13rem;
    }

    #hi {
        /* margin-top: 5rem; */
        width: 50%;
        margin-left: 25%;
    }

    #letter {
        margin-top: 30px;
        font-size: medium;
    }

    textarea{
        width: 90%;
        padding: 10px;
    }

    #message-button, #message-button-2,#second-form-button {
        margin-top: 8px;
        padding: 5px 10px;
        color: white;
        background-color: #303030;
        border: 1px #303030 solid;
        border-radius: 2px;
    }

    #wait {
        display: none;
        color: #2ecc71;
    }

    .wrapper-3{
        display: none;
    }

</style>
<body>
    <div class="container">
        <div id="correct-answer">
            <img id='hi' src='./hi.png'>
            <p id='letter'>
                Hi<br/>
                I hope all this isn't too much. I had to make sure that you don't get into any trouble in case your parents found the ball.<br/>
                This could be my last letter to you so this might be my only chance to clear any misunderstandings between us or say my final goodbye.<br/>
                First, let me clear all misunderstandings. 
                I will skip a lot of details because if it is indeed a goodbye, none of this would matter and I have to save space to say more important things.<br/><br/>

                I sent my last letter on 22nd June. Four days later, you waved at me. I waved back but maybe you didn't saw it. 
                I thought you would call me that day but you didn't. Five days later, you called me using your mother's number. 
                I am assuming that the call was from you instead of a random person. 
                Anyways, I missed your call. Two hours later, I called back. Your mother received the call. I asked if she called me and she said no. 
                Then I hanged the phone saying something like "I am sorry. Must be wrong number". Now, you are back home but you still haven't called me. <br/><br/>

                You have now stopped coming to your roof. Maybe, you have to go to some tutions or something. I just hope that you don't think that I am ignoring you 
                because I would never do such a thing. If it's because I didn't waved at you after you came back home, it's simply because whenever I want 
                to say Hi to you, my hands gets freezed. Also, your neighbours keep looking towards me. 
                I don't want them to know that I am waving at you. The distance between our houses also creates problems in communication. 
                Both of us sometimes miss each other's gestures.<br/><br/>

                I hope this cleares all misunderstandings between us. So, if you weren't messaging me because of these misunderstandings, 
                I am hoping that I can now finally get to know you. It's been too long already. I haven't been home for two months now. 
                Dadi's food isn't getting any better. My parents miss me. My classes are online that's why I have been able to live anywhere I want.
                If you want, you can also message me on Snapchat or Instagram or Whatsapp. It's your choice. I made these accounts recently. I don't use social media.
                Just message me soon if you still want us to know each other.<br/><br/>

                Snapchat: aryan_earth<br/>
                Instagram: aryan_earth<br/>
                Mobile Number: 7015230859<br/><br/>

                And please don't take too much days this time and don't wait for me to say Hi to you on the roof before messaging or calling me because 
                chances are I will mess it up again by not doing anything. I have already made you wait too long.
                We are not strangers anymore. But we aren't really friends either. We are in a very weird position. I understand that it's a big step for you 
                to message me. It was also a big step for me to send that first letter. I didn't knew anything about you. All I hoped for was that you were a good person. 
                Sometimes, you have to take a leap of faith first. The trusting part comes later. That's all I can say. I didn't do all this to convince you to message me. 
                I just wanted to clear everything and then let you decide for yourselves. I was hoping to find a great friend in you. 
                But, that is not my decision to make. It has always been yours.<br/><br/>
            </p>
            <br/><br/>
            <form id='message-contact'>
                <h5 style='margin-bottom: 5px;'>If you want to say something to me, then you can type here...</h5>
                <br/>
                <textarea placeholder="Type here..." id='textMessage' name='textMessage' rows='4'></textarea>
                <br/>
                <input id='message-button' onclick='send();' type="submit" value='Send'>
                <br/><br/>
                <h5>Or if you still do not want to talk to me...</h5>
                <button id='message-button-2' onclick="nextPage();">Continue</button>
            </form>
            <p id='wait' >Hold on...</p>
        </div>
        <div class="wrapper-1">
            <h1>Are we Friends?</h1>
            <br/>
            <h3>Let's find out...</h3>
            <br/>
            <h5>
                <q>
                    <i>
                        He comes from a place where good prevails <br/>
                        where friendship lasts and evil fails; <br/>
                        He is noble, his heart kind, <br/>
                        A friend hard to find.
                    </i>
                </q>   
            </h5>
            <br/>
            <p id='question'>What is the name of our brave adventurer?</p>
            <img id="image" src='./cloud_and_pathar.svg'>
            <br/>
            <input id='answer' type='text' placeholder="Type here...">
        </div>
        <div class="wrapper-2">
            <form id='contact-form'>
                <br/>
                <input type="submit" id='myBtn' onclick="sendAlert();" value="Continue">
                <!-- <p id='warning'  style='color: grey;'>(Submit the correct answer to reveal the message)</p> -->
            </form>
            <h3 id='reply'></h3>
        </div>
        <div class="wrapper-3">
            <p style="margin-bottom:15px;font-size: smaller;">OR, answer this...</p>
            <form id="second-form">
                <p id="secQue" style='margin-bottom:15px;'>What is my name (first name)?</p>
                <input id='pass' type='text' placeholder='Type here...' required><br/>
                <button id='second-form-button' type='submit' onclick="secFunc();">Submit</button>
            </form>
            <h2 id='mouse' style="margin-top:10px;"></h2>
        </div>
    </div>
<script>

    function nextPage() {
        window.location.href = "/page2.html";
    }

    const messageForm = document.getElementById('message-contact')
    const waitMessage = document.getElementById('wait')

    messageForm.addEventListener('submit', event => event.preventDefault())

    function send(){

            const letterFromHer = document.getElementById('textMessage').value

            if(!letterFromHer) {
                return swal("Oops!", "Fill in the text field", "warning");
            }

            wait.style.display = 'block'
            messageForm.style.display = 'none'

            const url='https://formspree.io/xrgydpoj';
            let data = {
                _replyto: 'fromPage@second.com',
                _message: letterFromHer
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 2')
                window.location.href = "/page2.html";
            })
            .catch(error => {
                console.log('error')
            })
    }

</script>
<script>
    const form = document.getElementById('contact-form')
    const formTwo = document.getElementById('second-form')

    const warning = document.getElementById('warning')
    const acknowledge = document.getElementById('reply')
    const correctAnswer = document.getElementById('correct-answer')

    const wrapperOne = document.querySelector('.wrapper-1')
    const wrapperTwo = document.querySelector('.wrapper-2')

    var answerCopy = []
    var counter = 0

    formTwo.addEventListener('submit', e => e.preventDefault())

    form.addEventListener('submit', e => {
        e.preventDefault()

        counter = counter + 1
        
        if (counter >= 3){
            acknowledge.innerHTML = ''
            document.querySelector('.wrapper-3').style.display = 'block'
        }
        
        const button = document.getElementById('myBtn')
            button.disabled = true

            const url='https://formspree.io/xrgydpoj';
            let data = {
                _replyto: 'fromPage@first.com',
                _message: answerCopy
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 1')
                form.reset()
            })
            .catch(error => {
                console.log('error')
            })
        //  Enabling button
            button.disabled = false
        })

    function sendAlert() {
        var answer = document.getElementById('answer').value

        answerCopy.push(answer)
        console.log(answerCopy)
        // warning.style.display = 'none'


        if( answer.toLowerCase() == 'pebbles' | answer.toLowerCase() == 'pebble' ) {
            
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';

        }
        else if(!answer){
            acknowledge.innerHTML = 'Fill in the field...'
        }

        else{
            document.getElementById('answer').value = ''
            acknowledge.innerHTML = 'Nope, try again...'
        }
    }

    function secFunc() {
        const replyTwo = document.getElementById('mouse')
        var pass = document.getElementById('pass').value

        if(pass.toLowerCase() == 'aryan'){
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';
            document.querySelector('.wrapper-3').style.display = 'none'

        }
        else{
            replyTwo.innerHTML = 'you need to work hard...'
        }
    }
</script>
</body>
</html>