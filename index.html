<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pebbles</title>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    body {
        font-family: Arial, Helvetica, sans-serif;
        font-size: large;
    }

    .container {
        margin-top: 20px;
        margin-bottom: 30px;
        margin-left: auto;
        margin-right: auto;
        width: 80%;
        /* position: absolute; */
        /* top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%); */
    }

    #reply {
        margin-top: 10px;
        color: black;
    }

    #correct-answer {
        display: none;
    }

    #myBtn {
        padding: 5px 10px;
        margin-bottom: 8px;
        background-color: #303030;
        border-radius: 2px;
        color: white;
        border: none;
    }

    #answer,#pass {
        padding: 3px;
        border: 1px #2ecc71 solid;
        border-radius: 2px;
    }

    #pass {
        margin-bottom: 5px;
    }

    #question, #secQue {
        font-size: 15px;
    }

    #image {
        padding-left: 20px;
        margin-top: 15px;
        margin-bottom: 15px;
        width: 13rem;
    }

    #hi {
        /* margin-top: 5rem; */
        width: 50%;
        margin-left: 25%;
    }

    #letter {
        margin-top: 30px;
        font-size: medium;
    }

    textarea{
        width: 90%;
        padding: 10px;
    }

    #message-button, #message-button-2,#second-form-button {
        margin-top: 8px;
        padding: 5px 10px;
        color: white;
        background-color: #303030;
        border: 1px #303030 solid;
        border-radius: 2px;
    }

    #wait {
        display: none;
        color: #2ecc71;
    }

    .wrapper-3{
        display: none;
    }

</style>
<body>
    <div class="container">
        <div id="correct-answer">
            <h1>Will we ever be friends?</h1>
            <p id='letter'>                
                <b>Dear friend,<br/>
                I need to be honest and clear.<br/>

                When I told you that I was hoping to find a great friend in you. I meant it. But now I am afraid the day won't come when I get to know you.<br/>

                I think it's time for me to move on and bid you farewell. I haven't been home for two months now and since you don't want to talk to me, I have no reason to stay here.
                It would be hard for me to go back home again without knowing you. I wish I never knew that you existed so that I'd be spared this pain.
                If I don't forget you, you would become poison in my veins. And I can't allow that to happen. I have a life to look forward to and I must focus back on my ambitions.<br/><br/>

                When you went away in July, you were gone forty days. For forty days, I waited hoping that you would come back soon.
                Every evening, I'd sit there and wish that I would see you there, with your little brother.
                For the first time in my life, I felt what it's like to lose all hope. I feared I was never going to see you again. I started to believe this wasn't your home.<br/><br/>

                But, I stayed here because before you left, you waved at me. I stayed because you called me from your mother's number. When I called back, your mother picked the phone.
                I thought that you would call me back soon but you never did. At that time, I thought you didn't called me again because you thought I went back home. But, now that you know I am still here, you
                still aren't calling me. If calling me was too much, you could have messaged me instead. I don't understand why you didn't called me the day you waved at me. I waved back at you in case you didn't saw it.
                And, did I really had to wave at you before you call me. Aren't these letters enough for you to know that I want to talk to you.
                But, none of this matters now. What's done is done. I just want to say goodbye to you and move on.<br/><br/>

                I still want to know you but friendship is a mutual relationship and if you don't want to talk to me, I respect your decision.<br/><br/>
                
                Before sending that first letter, I didn't knew anything about you. For twenty one years, I didn't even knew that you existed. There is not much you can tell about someone from a distance but 
                when I saw you play with your little brother, you seemed kind to me. That was enough for me. The rest was just a leap of faith.<br/>
                You were a complete mystery to me and it will most likely stay that way now.<br/>
                My father's job involves frequent transfers. Changing places and schools frequently meant that I never managed to make any close friends in my childhood. 
                We aren't children anymore but knowing you was the closest chance I would ever get to have a childhood friend.<br/><br/>

                I will always remember you as a friend. I don't know your name and will never get the chance to know it. But, I need a name to remember you by and it doesn't matter what I call you now.
                So, I will remember you by the name Sonya. It's the name of the girl in the book I am currently reading. It's a Russian novel called "War and Peace". 
                The name is Russian too but like I said it doesn't matter now.<br/><br/>

                There were two writers in this story. I started this story but it was always you who was going to write the ending.
                This is my last letter to you. Nothing follows hereafter.<br/><br/>

                I wish that you lead a fun and exciting life. I am sure that you will become a great person one day.<br/><br/>

                This story didn't have a happy ending but that doesn't mean that this letter cannot have one too. <br/>
                So, I have something for you on the next page. A token of friendship.<br/><br/>
                Clicking on the "Send" or "Continue" buttons below will take you to the next page.<br/><br/>

                If you still want to talk to me, you should tell me before this ends up as another memory. 
                I am here till August and once I go back home, I don't think we will get another chance to know each other.<br/><br/>
                
                I'll probably never see you again. I know that. And you know that. And knowing this, I say farewell.<br/><br/>
                Goodbye Sonya</b>
            </p>
            <br/><br/>
            <form id='message-contact'>
                <h5 style='margin-bottom: 5px;'>If you want to say something to me, then you can type it in the box below and press send. 
                    This is only one way communication. So, I can see your message but I can't reply to it. If you don't want to know me anymore, then can
                you please send something like a goodbye in the box below. That's all I ask from you.</h5>
                <br/>
                <textarea placeholder="Type here..." id='textMessage' name='textMessage' rows='4'></textarea>
                <br/>
                <input id='message-button' onclick='send();' type="submit" value='Send'>
                <br/><br/>
                <h5>Or, if you don't want to send anything, then click on Continue.</h5>
                <button id='message-button-2' onclick="nextPage();">Continue</button>
            </form>
            <p id='wait' >Hold on...</p>
        </div>
        <div class="wrapper-1">
            <h1>Are we Friends?</h1>
            <br/>
            <h3>Let's find out...</h3>
            <br/>
            <h5>
                <q>
                    <i>
                        He comes from a place where good prevails <br/>
                        where friendship lasts and evil fails; <br/>
                        He is noble, his heart kind, <br/>
                        A friend hard to find.
                    </i>
                </q>   
            </h5>
            <br/>
            <p id='question'>What is the name of our brave adventurer?</p>
            <img id="image" src='./cloud_and_pathar.svg'>
            <br/>
            <input id='answer' type='text' placeholder="Type here...">
        </div>
        <div class="wrapper-2">
            <form id='contact-form'>
                <br/>
                <input type="submit" id='myBtn' onclick="sendAlert();" value="Continue">
                <!-- <p id='warning'  style='color: grey;'>(Submit the correct answer to reveal the message)</p> -->
            </form>
            <h3 id='reply'></h3>
        </div>
        <div class="wrapper-3">
            <p style="margin-bottom:15px;font-size: smaller;">OR, answer this...</p>
            <form id="second-form">
                <p id="secQue" style='margin-bottom:15px;'>What is my name (first name)?</p>
                <input id='pass' type='text' placeholder='Type here...' required><br/>
                <button id='second-form-button' type='submit' onclick="secFunc();">Submit</button>
            </form>
            <h2 id='mouse' style="margin-top:10px;"></h2>
        </div>
    </div>
<script>

    function nextPage() {
        window.location.href = "/page2.html";
    }

    const messageForm = document.getElementById('message-contact')
    const waitMessage = document.getElementById('wait')

    messageForm.addEventListener('submit', event => event.preventDefault())

    function send(){

            const letterFromHer = document.getElementById('textMessage').value

            if(!letterFromHer) {
                return swal("Oops!", "Fill in the text field", "warning");
            }

            wait.style.display = 'block'
            messageForm.style.display = 'none'

            const url='https://formspree.io/xrgydlvr--';
            let data = {
                _replyto: 'fromPage@second.com',
                _message: letterFromHer
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 2')
                window.location.href = "/page2.html";
            })
            .catch(error => {
                console.log('error')
            })
    }

</script>
<script>
    const form = document.getElementById('contact-form')
    const formTwo = document.getElementById('second-form')

    const warning = document.getElementById('warning')
    const acknowledge = document.getElementById('reply')
    const correctAnswer = document.getElementById('correct-answer')

    const wrapperOne = document.querySelector('.wrapper-1')
    const wrapperTwo = document.querySelector('.wrapper-2')

    var answerCopy = []
    var counter = 0

    formTwo.addEventListener('submit', e => e.preventDefault())

    form.addEventListener('submit', e => {
        e.preventDefault()
        counter = counter + 1
        
        if (counter >= 3){
            acknowledge.innerHTML = ''
            document.querySelector('.wrapper-3').style.display = 'block'
        }

        for (var i=0; i< answerCopy.length; i++){
            if(answerCopy[i] == 'pebble' | answerCopy[i] == 'pebbles'){
                document.querySelector('.wrapper-3').style.display = 'none'
            }
        }
        
        const button = document.getElementById('myBtn')
            button.disabled = true

            const url='https://formspree.io/xrgydlvr--';
            let data = {
                _replyto: 'fromPage@first.com',
                _message: answerCopy
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 1')
                form.reset()
            })
            .catch(error => {
                console.log('error')
            })
        //  Enabling button
            button.disabled = false
        })

    function sendAlert() {
        var answer = document.getElementById('answer').value

        answerCopy.push(answer)
        console.log(answerCopy)
        // warning.style.display = 'none'


        if( answer.toLowerCase() == 'pebbles' | answer.toLowerCase() == 'pebble' ) {
            
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';
            document.querySelector('.wrapper-3').style.display = 'none'
        }
        else if(!answer){
            acknowledge.innerHTML = 'Fill in the field...'
            document.querySelector('.wrapper-3').style.display = 'none'
        }

        else{
            document.getElementById('answer').value = ''
            acknowledge.innerHTML = 'Nope, try again...'
            document.querySelector('.wrapper-3').style.display = 'none'
        }
    }

    function secFunc() {
        const replyTwo = document.getElementById('mouse')
        var pass = document.getElementById('pass').value

        if(pass.toLowerCase() == 'aryan'){
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';
            document.querySelector('.wrapper-3').style.display = 'none'

        }
        else{
            replyTwo.innerHTML = 'you need to work hard...'
        }
    }
</script>
</body>
</html>