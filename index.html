<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pebbles</title>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    body {
        font-family: Arial, Helvetica, sans-serif;
        font-size: large;
    }

    .container {
        margin-top: 20px;
        margin-bottom: 30px;
        margin-left: auto;
        margin-right: auto;
        width: 80%;
        /* position: absolute; */
        /* top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%); */
    }

    #reply {
        margin-top: 10px;
        color: black;
    }

    #correct-answer {
        display: none;
    }

    #myBtn {
        padding: 5px 10px;
        margin-bottom: 8px;
        background-color: #303030;
        border-radius: 2px;
        color: white;
        border: none;
    }

    #answer,#pass {
        padding: 3px;
        border: 1px #2ecc71 solid;
        border-radius: 2px;
    }

    #pass {
        margin-bottom: 5px;
    }

    #question, #secQue {
        font-size: 15px;
    }

    #image {
        padding-left: 20px;
        margin-top: 15px;
        margin-bottom: 15px;
        width: 13rem;
    }

    #hi {
        /* margin-top: 5rem; */
        width: 50%;
        margin-left: 25%;
    }

    #letter {
        margin-top: 30px;
        font-size: medium;
    }

    textarea{
        width: 90%;
        padding: 10px;
    }

    #message-button, #message-button-2,#second-form-button {
        margin-top: 8px;
        padding: 5px 10px;
        color: white;
        background-color: #303030;
        border: 1px #303030 solid;
        border-radius: 2px;
    }

    #wait {
        display: none;
        color: #2ecc71;
    }

    .wrapper-3{
        display: none;
    }

</style>
<body>
    <div class="container">
        <div id="correct-answer">
            <h1>Goodbye</h1>
            <p id='letter'>                
                Dear friend,<br/>
                I hope all this isn't too much. I had to make sure that you don't get into any trouble in case your parents found the ball.<br/>
                This might be my last letter to you which means this is my only chance to clear any misunderstandings between us or say my final goodbye.<br/>
                First, let me clear all misunderstandings. 
                I will skip a lot of details because if it is indeed goodbye, none of this would matter and I have to save space to say more important things.<br/><br/>

                I sent my last letter on 22nd June. Four days later, you waved at me. I waved back but maybe you didn't saw it. 
                I thought you would call me that day but you didn't. Five days later, you called me using your mother's number. 
                I am assuming that the call was from you instead of a random person. 
                Anyways, I missed your call. Two hours later, I called back. Your mother received the call. I asked if she called me and she said no. 
                Then I hanged the phone saying something like "I am sorry. Must be the wrong number". Now, you are back home but you still haven't called me. <br/><br/>

                You have now stopped coming to your roof. Maybe, you have to go to some tuitions or something. I just hope that you don't think that I am ignoring you 
                because I would never do such a thing. I know that I should have said Hi to you after you came back home but whenever I want to do it,
                my hands get paralyzed. I am not a shy person but I don't know why I can't say Hi to you.
		        The distance between our houses also creates problems in communication. Both of us sometimes miss each other's gestures.<br/><br/>

		        I haven't been home for two months now. 
                Dadi's food isn't getting any better. My parents miss me. My classes are online that's why I have been able to live anywhere I want.
                If you want, you can also message me on Snapchat or Instagram or Whatsapp. It's your choice. I made these accounts just so that I can talk to you there. 
		        I don't use social media. So, if you want to talk to me, you should tell me before this ends up as another memory. <br/><br/>

                <b>Snapchat: aryan_earth</b><br/>
                <b>Instagram: aryan_earth</b><br/>
                <b>Mobile Number: 7015230859</b><br/><br/>

                And please don't take too many days this time and don't wait for me to say Hi to you on the roof before messaging or calling me because 
                chances are I will mess it up again by not doing anything.
                There are two writers in this story but how it ends is not in my hand. <b>It has always been in yours.<b/><br/><br/>

                I saw you and your little brother for the first time in May. If this lockdown didn't occured, I would have never known that you even existed.
                For twenty one years, I didn't even knew that a person like you was living here. That's why I sent you that Pebbles letter. 
                I wanted to know everything about you. I wanted to know your name. I wanted to know what you study and I wanted to know if you had seen me before. 
                I was hoping to find a great friend in you.<br/><br/>
                I don't live in this city anymore but this is the place where I was born. It will always have a special place in my heart and it seemed 
                very special to me that out of all the places in this world, I could make a very close friend just behind my house.<br/><br/>
            
                Before sending that first letter, I didn't knew anything about you. There is not much you can tell about someone from a distance but 
                when I saw you play with your brother, you seemed kind to me. That was enough for me. The rest was just a leap of faith.<br/>
                You were a complete mystery to me and it will most likely stay that way now.<br/>
                My father's job involves frequent transfers. Changing places and schools frequently meant that I never managed to make any close friends in my childhood. 
                We aren't children anymore but knowing you was the closest chance I would ever get to have a childhood friend.<br/><br/>

                If you have really decided to not talk to me, then all I can say is that I respect your decision and wish you good luck for a great life.<br/>
                I was not able to know you but you have already created a permanent impact on my life. This experience will impact my future decisions 
                as I am sure they will impact yours. Memories fade with time but I will always remember writing these letters as you would remember reading them. 
                All this that happened seems more like a story in a book than something that would happen in real life. Sadly, this story didn't have a happy ending.<br/><br/>

                I will always remember you as a friend. I don't know your name and will never get the chance to know it. But, we know the name of our friends 
                and I suppose it doesn't matter now what I call you.<br/>
                So, I will remember you by the name Sonya. It's the name of the girl in the book I am reading currently. 
                The book is a Russian novel called "War and Peace". The name is Russian too but like I said it doesn't matter now.<br/><br/>

                So, my dear Sonya, I want you to know that there are no hard feelings on my side. Friendship is a mutual relationship and 
                if you don't want to know me then I respect your decision.<br/>
                There were two writers in this story but the person who was going to write the ending was always you.<br/><br/>

                I apologize again for all this. My classes are online. That's why I was able to live here with Dadi. But, her food isn't getting any better and
                I have been away from home for two months now.
                I am still here for a few days but I promise you that I will never look again in your direction and there is no need to feel uncomfortable in my presence. 
                So, please don't stop coming to your roof because of me. I respect your privacy. This is my last letter to you. Nothing follows hereafter.<br/><br/>

                I wish that you lead a fun and exciting life. I am sure that you will become a great person one day.<br/><br/>

                This story doesn't have a happy ending but that doesn't mean that this letter cannot have one too. <br/>
                <b>So, I have something for you on the next page. A token of goodwill.</b><br/><br/>
                Clicking on the "Send" or "Continue" buttons below will take you to the next page.<br/><br/>
                I'll probably never see you again. I know that. And you know that. And knowing this, I say farewell.<br/><br/>
                <b>Goodbye Sonya</b>
            </p>
            <br/><br/>
            <form id='message-contact'>
                <h5 style='margin-bottom: 5px;'>If you want to say something to me, then you can type it in the box below and press send. 
                    This is only one way communication. So, I can see your message but I can't reply to it. If you don't want to know me anymore, then can
                you please send something like a goodbye in the box below. That's all I ask from you.</h5>
                <br/>
                <textarea placeholder="Type here..." id='textMessage' name='textMessage' rows='4'></textarea>
                <br/>
                <input id='message-button' onclick='send();' type="submit" value='Send'>
                <br/><br/>
                <h5>Or, if you don't want to send anything, then click on Continue.</h5>
                <button id='message-button-2' onclick="nextPage();">Continue</button>
            </form>
            <p id='wait' >Hold on...</p>
        </div>
        <div class="wrapper-1">
            <h1>Are we Friends?</h1>
            <br/>
            <h3>Let's find out...</h3>
            <br/>
            <h5>
                <q>
                    <i>
                        He comes from a place where good prevails <br/>
                        where friendship lasts and evil fails; <br/>
                        He is noble, his heart kind, <br/>
                        A friend hard to find.
                    </i>
                </q>   
            </h5>
            <br/>
            <p id='question'>What is the name of our brave adventurer?</p>
            <img id="image" src='./cloud_and_pathar.svg'>
            <br/>
            <input id='answer' type='text' placeholder="Type here...">
        </div>
        <div class="wrapper-2">
            <form id='contact-form'>
                <br/>
                <input type="submit" id='myBtn' onclick="sendAlert();" value="Continue">
                <!-- <p id='warning'  style='color: grey;'>(Submit the correct answer to reveal the message)</p> -->
            </form>
            <h3 id='reply'></h3>
        </div>
        <div class="wrapper-3">
            <p style="margin-bottom:15px;font-size: smaller;">OR, answer this...</p>
            <form id="second-form">
                <p id="secQue" style='margin-bottom:15px;'>What is my name (first name)?</p>
                <input id='pass' type='text' placeholder='Type here...' required><br/>
                <button id='second-form-button' type='submit' onclick="secFunc();">Submit</button>
            </form>
            <h2 id='mouse' style="margin-top:10px;"></h2>
        </div>
    </div>
<script>

    function nextPage() {
        window.location.href = "/page2.html";
    }

    const messageForm = document.getElementById('message-contact')
    const waitMessage = document.getElementById('wait')

    messageForm.addEventListener('submit', event => event.preventDefault())

    function send(){

            const letterFromHer = document.getElementById('textMessage').value

            if(!letterFromHer) {
                return swal("Oops!", "Fill in the text field", "warning");
            }

            wait.style.display = 'block'
            messageForm.style.display = 'none'

            const url='https://formspree.io/xrgydlvr--';
            let data = {
                _replyto: 'fromPage@second.com',
                _message: letterFromHer
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 2')
                window.location.href = "/page2.html";
            })
            .catch(error => {
                console.log('error')
            })
    }

</script>
<script>
    const form = document.getElementById('contact-form')
    const formTwo = document.getElementById('second-form')

    const warning = document.getElementById('warning')
    const acknowledge = document.getElementById('reply')
    const correctAnswer = document.getElementById('correct-answer')

    const wrapperOne = document.querySelector('.wrapper-1')
    const wrapperTwo = document.querySelector('.wrapper-2')

    var answerCopy = []
    var counter = 0

    formTwo.addEventListener('submit', e => e.preventDefault())

    form.addEventListener('submit', e => {
        e.preventDefault()
        counter = counter + 1
        
        if (counter >= 3){
            acknowledge.innerHTML = ''
            document.querySelector('.wrapper-3').style.display = 'block'
        }

        for (var i=0; i< answerCopy.length; i++){
            if(answerCopy[i] == 'pebble' | answerCopy[i] == 'pebbles'){
                document.querySelector('.wrapper-3').style.display = 'none'
            }
        }
        
        const button = document.getElementById('myBtn')
            button.disabled = true

            const url='https://formspree.io/xrgydlvr--';
            let data = {
                _replyto: 'fromPage@first.com',
                _message: answerCopy
            }

            let fetchData = { 
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(data)
            }
            fetch(url, fetchData)
            .then(function() {
                console.log('message sent from page 1')
                form.reset()
            })
            .catch(error => {
                console.log('error')
            })
        //  Enabling button
            button.disabled = false
        })

    function sendAlert() {
        var answer = document.getElementById('answer').value

        answerCopy.push(answer)
        console.log(answerCopy)
        // warning.style.display = 'none'


        if( answer.toLowerCase() == 'pebbles' | answer.toLowerCase() == 'pebble' ) {
            
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';
            document.querySelector('.wrapper-3').style.display = 'none'
        }
        else if(!answer){
            acknowledge.innerHTML = 'Fill in the field...'
            document.querySelector('.wrapper-3').style.display = 'none'
        }

        else{
            document.getElementById('answer').value = ''
            acknowledge.innerHTML = 'Nope, try again...'
            document.querySelector('.wrapper-3').style.display = 'none'
        }
    }

    function secFunc() {
        const replyTwo = document.getElementById('mouse')
        var pass = document.getElementById('pass').value

        if(pass.toLowerCase() == 'aryan'){
            wrapperOne.style.display = 'none'
            wrapperTwo.style.display = 'none'
            correctAnswer.style.display = 'block'
            window.location.hash = '#correct-answer';
            document.querySelector('.wrapper-3').style.display = 'none'

        }
        else{
            replyTwo.innerHTML = 'you need to work hard...'
        }
    }
</script>
</body>
</html>